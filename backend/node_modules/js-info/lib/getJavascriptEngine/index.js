'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getJavaScriptEngine;

var _ = require('..');

var _helper = require('../helper');

function isJSC() {
  if ('WebkitAppearance' in window.document.documentElement.style) {
    return !(0, _helper.isV8)();
  }
  return false;
}

function isWkWebView() {
  var userAgent = window.navigator.userAgent;

  if (/safari/i.test(userAgent) && /version/i.test(userAgent) && !window.navigator.standalone || window.webkit && window.webkit.messageHandlers || !/constructor/i.test(window.HTMLElement) || !!window.indexedDB) {
    return true;
  }
  return false;
}

function getJavaScriptEngine() {
  if (_.runtime.node) return 'v8';
  if (_.os.ios) {
    if (isWkWebView() || _helper.browser.safari) return 'nitro';
    return 'jsc';
  }
  if (!_.runtime.browser) return 'unknown';
  if (_.browserEngine.gecko) return 'spidermonkey';
  if (_.browserEngine.blink) return 'v8';
  if (_.browserEngine.edgehtml || _.browserEngine.trident) return 'chakra';
  if ((0, _helper.isV8)()) return 'v8';
  if (isJSC()) return 'jsc';
  return 'unknown';
}